{% extends 'index.html' %}
{% block views %}
<div class="ui container" id="bad">
    <div class="ui vertically divided grid">
        <div id="div_table" class="sixteen wide column">
            <br>
            <input type="hidden" id="messagetype" value="{{atype}}">
            <input type="hidden" id="mostrar_modal" value="{{data_modal.mostrar}}">
            <input type="hidden" id="messageinfo" value="{{message}}">
            <h1 id="title" class="ui blue dividing header"><i class="clipboard check icon"></i>Asignación de
                Vales.
            </h1>
            <table class="ui celled table datatable" id="mytable" name="mytable" style="width: 100%">
                <thead>
                    <tr>
                        <th>Fecha Salida:</th>
                        <th>Marca/Modelo:</th>
                        <th>Placa:</th>
                        <th>Mision:</th>
                        <th>Pasajeros:</th>
                        <th>Opciones:</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Recibiendo todas las direcciones e insertandolas en la tabla -->
                    {% for folo in data %}
                    <tr>
                        <td>{{ folo.off_date }}</td>
                        <td>{{ folo.V_brand }} {{ folo.V_model }} </td>
                        <td>{{ folo.V_Plate }}</td>
                        <td>{{ folo.mission }}</td>
                        <td>{{ folo.passengers_number }}</td>
                        <td class="btnDelete">
                            <input type="hidden" id="folo06_id" name="folo06_id" value="{{folo.folo6id}}">
                            <i class="large check green circle outline link icon" title="Asignar Recursos"></i>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>

        <div id="data-hidden" class="row" style="display: none; margin-top: 4em; margin-left: 2em ; transition: ease;">
            <h1 id="title" class="ui blue dividing header"><i class="clipboard check icon"></i>Asignación de
                Vales.
            </h1>
                <div class="eight wide column">
                    <strong>Fecha de salida: </strong><label id="off_date_lb1"></label>
                    <div class="labels">
                        <strong>Hora de salida: </strong><label id="off_hour_lb1"></label>
                        <label>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</label>
                        <strong>Hora de retorno: </strong> <label id="return_hour_lb1"></label>
                    </div>
                    <div class="foloInfoText" style="line-height: 2em;">
                        <div> <strong>Cantidad de pasajeros: </strong><label
                                id="Passenger_number_lb1"></label>
                        </div>
                        <div><strong>Con motorista: </strong> <label id="with_driver_lb1"></label></div>
                        <div><strong>Persona que conducirá: </strong> <label id="driver_name_lb1"></label>
                        </div>
                        <div><strong>Tipo de licencia: </strong> <label id="license_type_lb1"></label></div>
                        <div><strong>Misión: </strong><label id="mission_lb1"></label></div>
                        <div><strong>Observación: </strong><label id="observation_lb1"></label></div>
                        <div><strong>Fecha de creación: </strong> <label id="created_at_lb1"></label></div>
                    </div>
                </div>
                <div class="seven wide column">
                    <div class="four wide required field">
                        <table class="ui celled collapsing table tablet stackable" id="addressTable1"
                            name="addressTable1">
                            <thead>
                                <tr>
                                    <th>Nombre del destino</th>
                                    <th>Detalle de la dirección</th>
                                    <th>Departamento</th>
                                    <th>Municipio</th>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </div>
        </div>
        <div id="data-hidden-form" class="row" style="display: none; margin-left: 2em;line-height: 2em ; transition: ease;">
            <form class="ui form" id="frm-prueba" action="/asignacion_de_combustible/vales" method="POST">
                <div class="two fields">
                    <div class="seven wide field">
                    <strong>Vehiculo: <label id="model_brand">-------</label> </strong><br>
                    <strong>Placas: <label id="v_plate">-------</label> </strong><br>
                    <strong>Vales Disponibles:
                        <label style="font-size:large ; color: blue;" id="quantity">-------</label> </strong>
                    <div class="fields">
                        <div class="four wide required field">
                            <strong>Kilometraje: </strong>
                            <input maxlength="1" type="number" name="mileage_inserted" min="1"
                                max="1000000" value="" id="mileage_inserted"></input>
                        </div>
                        <div class="required field">
                            <strong>Proveedor</strong>
                            <select class="ui fluid dropdown" id="proveedores" name="proveedores">
                                <option value="" selected>--Seleccione proveedor--</option>
                                {% for prov in proveedores %}
                                <option value="{{ prov.voucher_provider }}">{{ prov.voucher_provider }}</option>
                                {% endfor %}
                              </select>
                            
                        </div>
                    </div>
                    <button id="bAsignar" class="ui positive button" type="submit">Asignar</button>
                    <div id="bCancelar" class="ui left floated animated button" style="margin-bottom:1em" type="button">
                        <div class="visible content">Cancelar</div>
                        <div class="hidden content"><i class="left arrow icon"></i></div>
                    </div>
                    <input id="foloA_id" name="foloA_id" type="hidden">
                    <input id="veh_model" name="veh_model" type="hidden">
                    <input id="veh_plate" name="veh_plate" type="hidden">
                    <input id="d_name" name="d_name" type="hidden">
                    <input id="fecha_folo" name="fecha_folo" type="hidden">
                </div>
                <div class="four wide field">
                    <div class="four wide required field">
                        <table class="ui celled collapsing table tablet stackable" id="tablaVales"
                            name="tablaVales">
                            <thead>
                                <tr>
                                    <th>Numero</th>
                                    <th>Valor</th>
                                    <th>Factura</th>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </div>
            </div>                
            </form>
        </div>
    </div>
</div>
<div class="ui tiny inverted modal" id="succesModal">
    <div class="ui icon header">
        <i class="blue exclamation circle icon"></i>
        Asignacion Exitosa.
    </div>

    <div class="content">
        <p>Se han asignado los siguientes vales</p>
        <table class="ui celled table datatable">
            <thead>
                <tr>
                    <th>Numero:</th>
                    <th>Proveedor:</th>
                    <th>Valor:</th>
                    <th>Factura:</th>
                </tr>
            </thead>
            <tbody>
                <!-- Recibiendo todas las direcciones e insertandolas en la tabla -->
                {% for vale_m in data_modal.vales %}
                <tr>
                    <td>{{ vale_m.num_voucher }}</td>
                    <td>{{ vale_m.voucher_provider }}</td>
                    <td>{{ vale_m.price }}</td>
                    <td>{{ vale_m.num_entry_bill }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        <div><strong>Total: $ {{ data_modal.suma }}</strong></div>
        <div><strong>Al motorista: {{ data_modal.driver }}</strong></div>
        <div><strong>Al vehiculo: {{ data_modal.v_model }} || {{ data_modal.v_plate }} </strong></div>
        <div><strong>con Kilometraje: {{ data_modal.mileage }} </strong></div>
    </div>

    <div class="actions">
        <div class="ui green ok inverted button" type="submit">
            <i class="checkmark icon"></i>
            Aceptar
        </div>
        <!--         <div class="ui red deny button" type="submit">
            <i class="remove icon"></i>
            Cancelar
        </div> -->
    </div>

</div>

<script src="/javascript/a_assign.js"></script>
<link rel="stylesheet" href="/stylesheets/datatablefix.css">
</link>
<link rel="stylesheet" href="/stylesheets/frequent_places/frequent_places_list.css">
{% endblock %}