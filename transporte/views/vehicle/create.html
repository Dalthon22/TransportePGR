{% extends 'index.html'%}

{% block views %}

<div class="ui container" style="margin-top: 2rem;">
    <form class="ui form" id="nuevo_vehiculo" name="vehiculo" action="/vehiculos/gestionar" method="POST">
        {% if vehicle %}
        <h1 class="ui dividing header left aligned blue">Editar Vehículo</h1>
        {% else %}
        <h1 class="ui dividing header left aligned blue">Agregar Vehículo</h1>
        {% endif %}

        <h4 class="ui block header grey">Datos generales (valores únicos)</h4>
        <div class="two fields">
            <div class="required field">
                <label for="code">Código activo fijo</label>
                <input id="code" name="code" type="text" placeholder="Código activo fijo"
                    value="{{ vehicle.CodigoActivoFijo }}">
            </div>
            <div id="fPlate" class="required field">
                <label for="plate">Matrícula</label>
                <input id="vplate" name="plate" type="text" placeholder="AA236963"
                    value="{{ vehicle.NumeroPlacaVehiculo if vehicle.NumeroPlacaVehiculo else 'N' }}">
            </div>
        </div>
        <div class="three fields">
            <div class="required field">
                <label for="chassis">Chasis</label>
                <input id="chassis" name="chassis" type="text" placeholder="Chasis"
                    value="{{ vehicle.NumeroChasisVehiculo }}">
            </div>
            <div class="required field">
                <label for="engine">Motor</label>
                <input id="engine" name="engine" type="text" placeholder="64EKT931230"
                    value="{{ vehicle.NumeroMotorVehiculo }}">
            </div>
            <div class="required field">
                <label for="vin">Número VIN</label>
                <input id="vin" name="vin" type="text" placeholder="VIN" value="{{ vehicle.NumeroVINVeniculo }}">
            </div>
        </div>

        <h4 class="ui block header grey">Detalles</h4>
        <div class="fields">
            <div class="six wide required  field">
                <label for="brand">Marca</label>
                <input id="brand" name="brand" type="text" placeholder="Ej.: Toyota"
                    value="{{ vehicle.MarcaVehiculo }}">
            </div>
            <div class="four wide required field">
                <label for="model">Modelo</label>
                <input id="model" name="model" type="text" placeholder="Ej. Corolla SE"
                    value="{{ vehicle.ModeloVehiculo }}">
            </div>
            <div class="six wide required field">
                <label for="type">Tipo de vehículo</label>
                <select class="ui fluid search dropdown" name="type">
                    {% for t in types %}
                    {% if t.CodigoTipoVehiculo == vehicle.CodigoTipoVehiculo %}
                    <option value="{{t.CodigoTipoVehiculo}}" selected>{{t.TipoVehiculo}}</option>
                    {% else %}
                    <option value="{{t.CodigoTipoVehiculo}}">{{t.TipoVehiculo}}</option>
                    {% endif %}
                    {% endfor %}
                </select>
            </div>
        </div>
        <div class="fields">
            <label for="year">Año del vehículo</label>
            <div class="ui calendar" id="year">
                <div class="ui input left icon">
                    <i class="calendar icon"></i>
                    <input name="year" type="text" placeholder="Año" value="{{ vehicle.AnnoVehiculo }}">
                </div>
            </div>
            <div class="four wide field">
                <label for="color">Color del vehículo</label>
                <input id="color" name="color" type="text" placeholder="Negro" value="{{ vehicle.ColorVehiculo}}">
            </div>
            <div class="four wide required field">
                <label for="seats">Capidad de personas</label>
                <input id="seats" name="seats" min="2" max="40" type="number" placeholder="2-40"
                    value="{{ vehicle.CapacidadPersonaVehiculo }}">
            </div>
        </div>

        <h4 class="ui block header grey">Responsable</h4>
        <div class="eight wide required field">
            <label for="office">Oficina responsable</label>
            <select class="ui fluid search dropdown" name="office">
                {% for o in offices %}
                {% if o.CodigoOficinaResponsableVehiculo == vehicle.CodigoOficinaResponsableVehiculo %}
                <option value="{{o.CodigoOficinaResponsableVehiculo}}" selected>
                    {{o.DescripcionOficinaResponsableVehiculo}}
                </option>
                {% else %}
                <option value="{{o.CodigoOficinaResponsableVehiculo}}">{{o.DescripcionOficinaResponsableVehiculo}}
                </option>
                {% endif %}
                {% endfor %}
            </select>
        </div>

        <h4 class="ui block header grey">Situación actual</h4>
        <div class="sixteen wide field">
            <div class="two fields">
                <div class="four wide required field">
                    <label for="state">Estado</label>
                    <select class="ui fluid search dropdown" name="state">
                        {% for state in states %}
                        {% if state.CodigoEstado == vehicle.CodigoEstado %}
                        <option value="{{state.CodigoEstado}}" selected>{{state.EstadoVehiculo}}</option>
                        {% else %}
                        <option value="{{state.CodigoEstado}}">{{state.EstadoVehiculo}}</option>
                        {% endif %}
                        {% endfor %}
                    </select>
                </div>
                <div class="four wide required field">
                    <label for="mileage">Kilometraje actual</label>
                    <input id="mileage" name="mileage" min="0" type="number" placeholder="Kilometraje"
                        value="{{ vehicle.KilometrajeActual }}">
                </div>
            </div>
        </div>
        <div class="field">
            <label>Observaciones</label>
            <textarea id="observations" name="observations">{{vehicle.Observaciones}}</textarea>
        </div>
        <br>
        <input type="hidden" id="vehicle_id" name="vehicle_id" value="{{ vehicle.CodigoActivoFijo }}">
        <a href="/vehiculos">
            <div class="ui left floated animated button" style="margin-bottom:1em" type="button">
                <div class="visible content">Volver</div>
                <div class="hidden content"><i class="left arrow icon"></i></div>
            </div>
        </a>
        <div class="ui positive button" id="add_btn">Guardar</div>
        <!-- <div class="ui right floated yellow hiden hidden button" id="validate_plate">Validar matrícula</div> -->
    </form>
</div>

<link rel="stylesheet" href="/stylesheets/vehicle.css">
<script src="/javascript/vehicle/a_vehicle_add.js"></script>

{% endblock %}